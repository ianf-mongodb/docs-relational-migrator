.. _rm-colocation:

==========
Colocation
==========

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

How to run Relational Migrator
------------------------------

The following table outlines some high level recommendations for how to 
run Relational Migrator. Also note that the 
:ref:`Kafka deployment model <kafka-intro>` allows you greater 
resilience and scalability and can be used with any of the 
deployment options.

.. list-table::
   :header-rows: 1
   :widths: 40 60

   * - Recommended Environment 
     - Description

   * - Labtop / Workstation / Docker
     - For smaller scale jobs that run for less than 4 hours and general
       debugging and testing.

   * - Remote server / EC2 / Azure VM
     - For larger scale production jobs that, that run for more than 4 
       hours.

Where to run Relational Migrator
--------------------------------

- For best performance, locate the machine or server running Relational 
  Migrator as geographically close to the source database as possible. 

  - If your using Relational Migrator for an on-premises migration, this 
    means running Relational Migrator in the same datacenter as the source
    database.

  - If your using a cloud hosted database this means running Relational 
    Migrator on an EC2 instance or VM in the same VPC as the source 
    database.

.. tip::

   If your running a sync job from a labtop or workstation, check the 
   sleep timeout setting for your operating system. If your machine 
   goes to sleep in the middle of a migration the sync job fails. 

Network Considerations
----------------------

When using Relational Migrator, the system firewall on the machine or 
server must have inbound and outbound TPC traffic allowed to the source
database. The source database connection must also allow TPC traffic 
from the IPV4 address of the machine or server running Relational
Migrator.

VPC and Cloud Networking
~~~~~~~~~~~~~~~~~~~~~~~~

When running Relational Migrator on an AWS EC2 instance, check the 
security group configurations of the EC2 instance. Also check that the 
router table allows traffic to the database. If your database is hosted 
on a public IP address, this means that the EC2 instance needs a router
table entry to an internet gateway within the VPC. For details on 
specific cloud provider network configuration instructions see:

- `AWS Networking <https://docs.aws.amazon.com/vpc/>`__
- `Azure Networking <https://azure.microsoft.com/en-us/products/category/networking>`__
- `GCP Networking <https://cloud.google.com/vpc/docs>`__

AWS Private Link
~~~~~~~~~~~~~~~~

AWS PrivateLink is a robust, scalable solution allowing you to 
establish private connections between your VPC and various services, 
making them feel as though they're located within your own VPC. This 
eliminates the necessity for an internet gateway or public IP addresses.

You can use Relational Migrator with AWS private link. You need to 
configure an AWS private link endpoint. For details see 
`<https://docs.aws.amazon.com/vpc/latest/privatelink/what-is-privatelink.html>`__.

System Hardware
---------------

For specific hardware recommendations, see :ref:`rm-system-requirements`.

Get Started
-----------

For detailed installation instructions, see :ref:`installation`.
