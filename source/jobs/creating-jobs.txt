.. _rm-creating-jobs:

=================
Create a Sync Job
=================

Create new sync jobs from the **Data Migration** tab.

About This Task
---------------

The URI credentials you provide when creating a sync job do not 
need to be the same as the credentials used when creating your project.

Before you Begin
----------------

- :ref:`Create one or more mapping rules <new-rules-from-relational>` in 
  your Relational Migrator project.

- Prepare a :ref:`MongoDB URI <rm-relational-connection-strings>` and credentials that have 
  read/write permissions on your destination database.

Steps
-----

On the **Data Migration** tab, click **Create Sync Job**. Relational 
Migrator only runs one sync job at a time. If a sync job is in progress, 
this button is disabled.

On the **Connect Source DB** form, enter the connection details to create the JDBC URI for your relational database.
Select a database type from the **Database type** drop-down. 
Enter a host IP or DNS name in the **Host** text box.
Enter a port number in the **Port** text box.
Enter a database name in the **Database** text field. 
   
Depending on your relational database, this behavior varies:

  .. list-table::
    :widths: 30 70
    :header-rows: 1
  
  * - Database Type
    - Behavior

  * - Oracle
    - You must enter a database name and a **Service ID** or **SID**.

  * - SQL Server
    - Enter a database name, or leave blank to load all databases.

  * - MySQL 
    - Enter a database name, or leave blank to load all databases.

  * - Postgres 
    - Leaving database name blank loads schemas from the default database.

Enter a user name in the **Username** text box. &nbsp;
Enter a password in the **Password** text box. &nbsp;
(Optional) Click the **Save a password for this session** checkbox. &nbsp;
Click the **SSL** toggle switch to enable or disable SSL and select an SSL mode. &nbsp;
Click **Connect**.

.. note:: Connection SSL details

  Connection and SSL details depend on the database type you are 
  connecting to. In addition to the generic connection properties 
  listed above, you may also need to select an **Identifier** for 
  Oracle and **Authentication** for SQL Server.

If you want to specify the JDBC URI manually, click the **Enter URI manually** 
toggle switch on the **Connect SourceDB** form. For details, see `Relational Database Connection Strings <../../Connection-Strings/relational-database-connection-strings>`__.

Click **Connect**. 

On the **Connect Destination DB** form, input your **MongoDB connection string (URI)**. If you leave any of the form fields for **Database**\ , **Username**\ , or **Password** blank, the values specified in the URI are used.

Click **Connect**.

On the **Migration Options** form, select your **Migration Options**\ :

.. list-table::
  :widths: 30 70
  :header-rows: 1

* - Migration Option
  - Description

* - Mode 
  - Defines the type of sync job.

* - Drop destination collections before migration  
  - Boolean. Indicates whether Relational Migrator drops a destination collection before transferring data. 

* - Stop after errors 
  - Integer. Indicates the number of errors after which Relational 
    Migrator stops the sync job.

* - Verify migrated data 
  - Boolean. If true, the sync engine checks the migrated data 
    against the source database. Only supported for snapshot mode. |

Once you have established the database connection and specified the job type on the **Migration Options** form, Relational Migrator conducts various checks to ensure that the database is configured correctly. If any configuration is missing, a banner appears indicating that the database is not properly configured with a **GENERATE SCRIPT** button to download a SQL script. 

This script includes the required configuration statements and additional  instructions in the form of comments. 

..warning:: Before proceeding with starting a sync job

  #. Download the script. 
  #. Carefully review its contents.
  #. Execute the statements.
  #. Follow any commented manual steps.

Click **Start**.

Learn More
----------

For detailed information regarding the configuration requirements for each database, 
see the follow Debezium reference links, which are internally utilized by Relational Migrator:

- `MySQL <https://debezium.io/documentation/reference/stable/connectors/mysql.html#setting-up-mysql>`__
- `Oracle <https://debezium.io/documentation/reference/stable/connectors/oracle.html#_preparing_the_database>`__
- `PostgreSQL <https://debezium.io/documentation/reference/stable/connectors/postgresql.html#setting-up-postgresql>`__
- `SQL Server <https://debezium.io/documentation/reference/stable/connectors/sqlserver.html#setting-up-sqlserver>`__

See :ref:`rm-data-Verification` to learn more about the data verification process.

Next Steps
----------

:ref:`rm-monitoring-jobs`
