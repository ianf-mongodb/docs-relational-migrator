.. _rm-prereq-oracle:

==============================
Oracle Migration Prerequisites
==============================

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Overview

Connecting Relational Migrator to Oracle requires a system administrator role user to enable LogMiner in the database, if not already enabled. Relational Migrator supports two types of sync jobs:

- Snapshot which migrates all the data and then stops.
- Continuous which runs a snapshot and then enters a CDC stage to 
  continuously replicate changes.

When you set up a new data migration, Relational Migrator will automatically generate the required SQL code for a database administrator to enable CDC for that job, which they can inspect and manually execute. It will take a few minutes to review and execute the generated SQL code script. This document explains the purpose of those scripts.
Supported Database Versions
12c and higher 	Self hosted, AWS RDS, Azure SQL Database
from https://www.mongodb.com/docs/relational-migrator/supported-databases/

Steps
-----

.. tabs::

   .. tab:: Snapshot Jobs
      :tabid: enable-snapshot-jobs

      For snapshot jobs against SQL Server, you must enable 
      CDC at the database level. 

      .. procedure::
         :style: normal

         .. step:: Configure CDC at the Database Level

            A.

   .. tab:: Continuous Jobs
      :tabid: enable-continuous-jobs

      .. procedure::
         :style: normal

         .. step:: Configure CDC at the database level

            .. code-block:: sql
               :copyable: true

               USE MyDB
               GO
               EXEC sys.sp_cdc_enable_table
               @source_schema = N'dbo',
               @source_name   = N'MyTable',
               @role_name     = N'MyRole',
               @filegroup_name = N'MyDB_CT',
               @supports_net_changes = 1
               GO

Learn More
----------

Relational Migrator relies on the open-source Debezium connector to 
capture row-level changes. For more details, see:

- `Debezium Oracle <https://debezium.io/documentation/reference/stable/connectors/oracle.html#_preparing_the_databas>`__
- `Oracle docs how to toggle archive logging https://docs.oracle.com/cd/B19306_01/server.102/b14231/archredo.htm`__.
