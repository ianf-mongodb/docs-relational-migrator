===================================
MongoDB Database Connection Strings
===================================

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. include:: /includes/uri-usage-disclaimer.rst

To start a migration job, Relational Migrator must connect to your MongoDB 
database. Relational Migrator requires a username and password which has ``readWrite`` 
access in the target database. This page describes 
the procedure to make a authenticated user account and the Uniform Resource 
Identifier (URI) formats for defining connections to your target 
MongoDB database. 

Relational Migrator can use both Atlas and On-Premises URIs. This page 
provides separate instructions for each deployment type.

Atlas
-----

Connect to Your Deployment
~~~~~~~~~~~~~~~~~~~~~~~~~~

To provision user accounts in Atlas you will need to be 
`logged in to the Atlas GUI <https://cloud.mongodb.com/v2/>`__.

Create a New User
~~~~~~~~~~~~~~~~~

#. In the Security section of the left navigation, click **Database Access**.
#. Click the **Add New Database User** button. 
#. On the **Add New Database User** modal in the **Authentication Method** section, 
   select **Password** as the authentication method. 
#. Enter the username ``migrator-service`` in the top text field. 
#. Enter the password ``password`` in the lower text field. 
#. Under **Database User Privileges**, click **Add Built-in Role**.
#. Select **Read and write to any database**.
#. Click **Add User**.

Connection URI
~~~~~~~~~~~~~~

Using the previously created account credentials, format the connection
URI for the target database. In this case ``MongoEnterprises``.

.. code-block::

   mongodb+srv://migrator-service:password@sandbox.xxxxx.mongodb.net/MongoEnterprises

On-Premises
-----------

In this example, you will use mongosh to provision a user account that will connect 
to the ``MongoEnterprises`` database.

This examples assume your deployment is running on ``localhost`` and the 
default port of ``27017``.

